{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template unilabeltype_imageboard/imageboard
    Template to show a bootstrap modal dialog.

    Example context (json):
    {
      "showintro": false,
      "intro": "",
      "images": [
        {
          "id": "9",
          "imageboardid": "1",
          "title": "",
          "url": "http:\/\/localhost:8000\/mod\/forum\/view.php?id=136",
          "xposition": "150",
          "yposition": "100",
          "targetwidth": "80",
          "targetheight": "0",
          "imageurl": {},
          "nr": 0
        },
        {
          "id": "10",
          "imageboardid": "1",
          "title": "",
          "url": "",
          "xposition": "400",
          "yposition": "200",
          "targetwidth": "0",
          "targetheight": "0",
          "imageurl": {http:\/\/localhost:8000\/mod\/forum\/view.php?id=137},
          "nr": 1
        }
      ],
      "hasimages": true,
      "cmid": "140",
      "canvaswidth": "500",
      "autocanvaswidth": false,
      "canvasheight": "600",
      "autocanvasheight": false,
      "backgroundimage": {},
      "capababilityforgrid": true,
      "showborders": true,
      "bordercolor": "#2D57FA",
      "gridcolor": "#B7009E"
    }
}}

{{#showintro}}
    {{{intro}}}
{{/showintro}}

<div id="unilabeltype-imageboard-{{cmid}}" style="position: relative; background: url('{{backgroundimage}}'); width: {{canvaswidth}}px; height: {{canvasheight}}px; background-size: cover;">
{{#images}}
        <a href="{{url}}">
            <div style="position: absolute; left: {{xposition}}px; top: calc({{yposition}}px - 34px); color: #fff; background-color: #3399ff; font-size: 24px;">
                {{title}}
            </div>


            <div style="position: absolute; left: {{xposition}}px; top:{{yposition}}px; {{#hastargetwidth}}width: {{targetwidth}}px;{{/hastargetwidth}}
                {{#hastargetheight}}height: {{targetheight}}px; {{/hastargetheight}}">

                <img src="{{imageurl}}"
                     style="object-fit: contain; width: 100%; height: 100%; {{#showborders}} border: solid 1px {{bordercolor}}; {{/showborders}}">
        </a>
    </div>
{{/images}}
</div>

{{#js}}
    require(['unilabeltype_imageboard/imageboardrenderer'],
    function(imageboardrenderer) {
    imageboardrenderer.init({{cmid}}, {{canvaswidth}});
    }
    );
{{/js}}
